<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ìµëª… ìƒì¼ ì¶•í•˜ ë©”ì‹œì§€</title>

  <!-- Pretendard ì›¹í°íŠ¸ -->
  <link
    rel="stylesheet"
    as="style"
    crossorigin
    href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@latest/dist/web/static/pretendard.css"
  />

  <!-- Firebase SDK (v8) -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

  <style>
    body,
    textarea,
    button,
    input,
    #status {
      font-family: "Pretendard", -apple-system, BlinkMacSystemFont,
        "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
    }

    body {
      margin: 0;
      height: 100vh;
      background:
        linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)),
        url("https://images.unsplash.com/photo-1543731068-7e0f5beff43a");
      background-size: cover;
      background-position: center;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #fff;
      overflow: hidden;
    }

    /* âœ¨ ë°˜ì§ì„ íš¨ê³¼ */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background-image: radial-gradient(#ffffff66 1px, transparent 1px);
      background-size: 32px 32px;
      animation: sparkle 9s linear infinite;
      pointer-events: none;
    }

    @keyframes sparkle {
      from { transform: translateY(0); }
      to { transform: translateY(-32px); }
    }

    .page {
      width: 100%;
      display: flex;
      justify-content: center;
      z-index: 1;
    }

    .card {
      background: linear-gradient(
        135deg,
        rgba(255,255,255,0.18),
        rgba(255,255,255,0.06)
      );
      backdrop-filter: blur(10px);
      padding: 42px 36px;
      width: 90%;
      max-width: 420px;
      border-radius: 22px;
      box-shadow: 0 30px 60px rgba(0,0,0,0.45);
      text-align: center;
      border: 1px solid rgba(255,255,255,0.25);
    }

    .card h1 {
      margin: 0 0 10px;
      font-size: 30px;
      font-weight: 800;
    }

    .desc {
      font-size: 15px;
      color: #ffecec;
      margin-bottom: 22px;
    }

    input {
      width: 100%;
      padding: 14px 16px;
      border-radius: 14px;
      border: none;
      font-size: 15px;
      margin-bottom: 14px;
      box-sizing: border-box;
      outline: none;
    }

    input::placeholder {
      color: rgba(0, 0, 0, 0.4);
    }

    textarea {
      width: 100%;
      height: 120px;
      resize: none;
      padding: 16px;
      border-radius: 14px;
      border: none;
      font-size: 16px;
      line-height: 1.5;
      box-sizing: border-box;
      margin-bottom: 18px;
      outline: none;
    }

    textarea::placeholder {
      color: #9e9e9e;
    }

    input:disabled,
    textarea:disabled {
      background: #e0e0e0;
      color: #777;
    }

    button {
      width: 100%;
      padding: 16px;
      font-size: 17px;
      font-weight: 700;
      border: none;
      border-radius: 14px;
      background: linear-gradient(135deg, #ff4ecd, #ff8a00);
      color: #fff;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    button:hover:not(:disabled) {
      transform: translateY(-3px);
      box-shadow: 0 12px 25px rgba(0,0,0,0.35);
    }

    button:disabled {
      background: #555;
      cursor: not-allowed;
      box-shadow: none;
    }

    #status {
      margin-top: 16px;
      font-size: 14px;
      font-weight: 600;
      color: #7CFF7C;
    }
  </style>
</head>
<body>

  <div class="page">
    <div class="card">
      <h1>ğŸ‚ ìµëª… ìƒì¼ ì¶•í•˜ ğŸ‰</h1>
      <p class="desc">ìƒì¼ ì¶•í•˜ ë©”ì‹œì§€ë¥¼ ììœ ë¡­ê²Œ ë‚¨ê²¨ì£¼ì„¸ìš” âœ¨</p>

      <!-- âœ… ë‹‰ë„¤ì„ ì…ë ¥ -->
      <input
        type="text"
        id="nickname"
        placeholder="SOOP ë‹‰ë„¤ì„"
        maxlength="20"
      />

      <!-- âœ… ë©”ì‹œì§€ ì…ë ¥ -->
      <textarea
        id="message"
        placeholder="ìƒì¼ ì¶•í•˜ ë©”ì‹œì§€ë¥¼ ì ì–´ì£¼ì„¸ìš” ğŸ"
      ></textarea>

      <button id="submitBtn">ğŸˆ ë©”ì‹œì§€ ë³´ë‚´ê¸°</button>

      <p id="status"></p>
    </div>
  </div>

  <script>
    /***** Firebase ì„¤ì • *****/
    const firebaseConfig = {
      apiKey: "AIzaSyDtDtadwFVoYMSahJyeNKqh-3NfwSagi-o",
      authDomain: "eunbin-4ba29.firebaseapp.com",
      projectId: "eunbin-4ba29",
      storageBucket: "eunbin-4ba29.firebasestorage.app",
      messagingSenderId: "1042774764206",
      appId: "1:1042774764206:web:1068894ff8f3c583ef5b3f",
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const nicknameInput = document.getElementById("nickname");
    const messageInput = document.getElementById("message");
    const submitBtn = document.getElementById("submitBtn");
    const statusText = document.getElementById("status");

    /***** ğŸ‚ ìƒì¼ ë©”ì‹œì§€ ì œì¶œ *****/
    submitBtn.onclick = async () => {
      const message = messageInput.value.trim();
      const nickname = nicknameInput.value.trim() || "ìµëª…";

      if (!message) {
        alert("ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
      }

      try {
        await db.collection("birthday_messages").add({
          nickname: nickname,
          message: message,
          createdAt: new Date(),
          order: Date.now(),
          approved: false
        });

        statusText.innerText = "ğŸ‰ ë©”ì‹œì§€ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!";
        nicknameInput.disabled = true;
        messageInput.disabled = true;
        submitBtn.disabled = true;

      } catch (e) {
        alert("ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
      }
    };
  </script>

</body>
</html>
